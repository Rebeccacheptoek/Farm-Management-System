{% extends 'admin/base.html' %}

{% block content %}
  <div class="row">
    <div class="col-md-6">
      <h3>Expenses</h3>
      <canvas id="expense-chart"></canvas>
    </div>
    <div class="col-md-6">
      <h3>Earnings</h3>
      <canvas id="earning-chart"></canvas>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"></script>
  <script type="text/javascript">
    // Get the data from the context variables
    var expense_labels = "{{ expense_labels|join:', ' }}".split(',');
    var expense_values = "{{ expense_values|join:', ' }}".split(',');
    var earning_labels = "{{ earning_labels|join:', ' }}".split(',');
    var earning_values = "{{ earning_values|join:', ' }}".split(',');

    // Create the pie charts
    var expense_chart = new Chart(document.getElementById("expense-chart"), {
      type: 'pie',
      data: {
        labels: expense_labels,
        datasets: [{
          data: expense_values,
          backgroundColor: [
            'rgba(255, 99, 132, 0.8)',
            'rgba(54, 162, 235, 0.8)',
            'rgba(255, 206, 86, 0.8)',
            'rgba(75, 192, 192, 0.8)',
            'rgba(153, 102, 255, 0.8)',
            'rgba(255, 159, 64, 0.8)'
          ]
        }]
      },
      options: {
        title: {
          display: true,
          text: 'Expenses'
        }
      }
    });

    var earning_chart = new Chart(document.getElementById("earning-chart"), {
      type: 'pie',
      data: {
        labels: earning_labels,
        datasets: [{
          data: earning_values,
          backgroundColor: [
            'rgba(255, 99, 132, 0.8)',
            'rgba(54, 162, 235, 0.8)',
            'rgba(255, 206, 86, 0.8)',
            'rgba(75, 192, 192, 0.8)',
            'rgba(153, 102, 255, 0.8)',
            'rgba(255, 159, 64, 0.8)'
          ]
        }]
      },
      options: {
        title: {
          display: true,
          text: 'Earnings'
        }
      }
    });
  </script>
{% endblock %}
